"use strict";(self["webpackChunkai_web"]=self["webpackChunkai_web"]||[]).push([[369],{3046:function(e,t,l){l.d(t,{A:function(){return k}});var a=l(6966),i=(l(5331),l(5550),l(2703),l(7456),l(8992),l(4520),l(6768)),n=l(4232),o=l(144),u=l(5130),r=l(2738);const d={class:"dot"};var s={__name:"Menu",props:{menuTitle:{type:Array},platform:{type:Array},fixedWidth:{type:String},menuIndex:{type:Number,default:1},subIndex:{type:Number,default:1}},emits:["sendId"],setup(e,{expose:t,emit:l}){const s=e;let c=(0,o.KR)(0),v=(0,r.A)();function k(e){c.value=e}t({setMenuWidth:k});const m=l,f=(e,t,l)=>{m("sendId",e,t,l)};return(e,t)=>{const l=a.ct,r=a.$b,k=a.lj;return(0,i.uX)(),(0,i.Wv)(k,{ellipsis:"",class:"el-menu-popper-demo",mode:"horizontal","popper-offset":0,style:(0,n.Tr)({width:s.fixedWidth?s.fixedWidth:(0,o.R1)(c)+"px"}),"default-active":s.menuTitle[0].id+"-1"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.menuTitle,(e=>((0,i.uX)(),(0,i.Wv)(r,{key:e.id,index:e.id.toString()},{title:(0,i.k6)((()=>[(0,i.bo)((0,i.Lk)("div",d,"●",512),[[u.aG,(0,o.R1)(v).subscribeList.filter((t=>t.keywordId===e.id&&1===t.status)).length]]),(0,i.eW)(" "+(0,n.v_)(e.name),1)])),default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.platform,(t=>((0,i.uX)(),(0,i.Wv)(l,{key:t.id,index:e.id+"-"+t.id,onClick:l=>f(e.id,t.id,e.blockId)},{default:(0,i.k6)((()=>[(0,i.eW)((0,n.v_)(t.name),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1032,["index"])))),128))])),_:1},8,["style","default-active"])}}},c=l(1241);const v=(0,c.A)(s,[["__scopeId","data-v-98483a36"]]);var k=v},6369:function(e,t,l){l.r(t),l.d(t,{default:function(){return re}});var a=l(6289),i=l(813),n=(l(5331),l(4896),l(6768));const o={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function u(e,t){return(0,n.uX)(),(0,n.CE)("svg",o,t[0]||(t[0]=[(0,n.Lk)("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512L340.864 831.872a30.59 30.59 0 0 0 0 42.752a29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1)]))}var r={name:"ep-arrow-right",render:u},d=l(3046),s=l(5130),c=l(144),v=l(4232),k=l(7477);const m={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},f={click:e=>e instanceof MouseEvent};var p=l(153),b=l(1737),h=l(6894);const g=(e,t,l)=>{const a=(0,c.IJ)(),i=(0,c.IJ)(),o=(0,c.KR)(!1),u=()=>{a.value&&(o.value=a.value.scrollTop>=e.visibilityHeight)},r=e=>{var l;null==(l=a.value)||l.scrollTo({top:0,behavior:"smooth"}),t("click",e)},d=(0,p.k3)(u,300,!0);return(0,b.MLh)(i,"scroll",d),(0,n.sV)((()=>{var t;i.value=document,a.value=document.documentElement,e.target&&(a.value=null!=(t=document.querySelector(e.target))?t:void 0,a.value||(0,h.$)(l,`target does not exist: ${e.target}`),i.value=a.value),u()})),{visible:o,handleClick:r}};var y=l(9077),C=l(3513);const R="ElBacktop",I=(0,n.pM)({name:R}),_=(0,n.pM)({...I,props:m,emits:f,setup(e,{emit:t}){const l=e,a=(0,C.DU)("backtop"),{handleClick:o,visible:u}=g(l,t,R),r=(0,n.EW)((()=>({right:`${l.right}px`,bottom:`${l.bottom}px`})));return(e,t)=>((0,n.uX)(),(0,n.Wv)(s.eB,{name:`${(0,c.R1)(a).namespace.value}-fade-in`},{default:(0,n.k6)((()=>[(0,c.R1)(u)?((0,n.uX)(),(0,n.CE)("div",{key:0,style:(0,v.Tr)((0,c.R1)(r)),class:(0,v.C4)((0,c.R1)(a).b()),onClick:(0,s.D$)((0,c.R1)(o),["stop"])},[(0,n.RG)(e.$slots,"default",{},(()=>[(0,n.bF)((0,c.R1)(i.tk),{class:(0,v.C4)((0,c.R1)(a).e("icon"))},{default:(0,n.k6)((()=>[(0,n.bF)((0,c.R1)(k.ziD))])),_:1},8,["class"])]))],14,["onClick"])):(0,n.Q3)("v-if",!0)])),_:3},8,["name"]))}});var L=(0,y.A)(_,[["__file","backtop.vue"]]),K=l(5376);const E=(0,K.GU)(L);var F=l(1780),W=l(2760),x=(l(5616),l(1702)),w=(l(9648),l(4358)),X=(l(9092),l(2687)),A=(l(8785),l(4114),l(8992),l(4520),l(3949),l(4603),l(7566),l(8721),l(1304)),M=l(7147),$=l(5465),T=l(5384),S=l(1387),U=l(9787),V=l(2738),z=l(4627),N=l(1796),G=l(1774);const B={id:"main-login"},D={id:"main-mask"},H={id:"dialog-name"},Q={id:"dialog-avatar"},j=["src"],J={class:"dialog-footer"},P={id:"main-aside"},Y=["onClick"],q={class:"title"},O={id:"main-article"},Z={id:"header-right"},ee=["src"],te={class:"box-title"},le={class:"content-header"},ae={key:0},ie={class:"content"};var ne={__name:"Main",setup(e){const t=(0,c.KR)(null),l=(0,c.KR)(null),o=(0,c.KR)(null);let u=1076;const k=(0,c.KR)(null),m=(0,S.rd)(),f=(0,U.A)(),p=(0,V.A)(),b=(0,c.KR)(!1),h=(0,c.KR)(!1),g=(0,c.KR)(""),y=(0,c.KR)("");let C,R=(0,c.KR)(new Map);const I=(0,c.KR)({});Promise.all([(0,T.SE)(),(0,T.Gf)(),(0,T.gs)(),(0,T.uo)()]).then((()=>{for(let e in $.MK){const t=$.MK[e],l=p.menuTitle.filter((e=>e.blockId==t.blockId))[0];l&&(R.value.set(t.blockId,[l.id,p.platform[0].id]),L(t.blockId,p.platform[0].id,l.id))}})),""==f.token&&localStorage.getItem("token")&&(0,T.ug)(),(0,n.wB)((()=>f.id),(e=>{e>0&&(0,T.gs)()}));const _=e=>{(0,T.U_)(e);let t=m.resolve({path:`/Poster/${e}`});window.open(t.href,"_blank")},L=(e,t,l,a=1,i=5,n="")=>{(0,T.vS)(a,i,t,l,n).then((t=>{t&&(I.value[e]=t.records)}))},K=async e=>{(0,T.gs)().then((()=>p.subscribeList.filter((t=>t.keywordId===e)).length))},ne=async(e,t,l)=>{R.value.set(l,[e,t]),L(l,t,e);const a=await K(e);a&&(0,T.nV)(e,0)},oe=e=>{const[t,l]=R.value.get(e);m.push(`/block/${e}/${t}/${l}`)},ue=()=>{const e=document.getElementById("chooseImg");e&&e.click()},re=e=>{C=e.target.files[0],e.target.value="",g.value=URL.createObjectURL(C)},de=async()=>{C?(0,T.QM)(C).then((e=>{(0,T.bu)(y.value,e)})):y.value!=f.nickName&&(0,T.bu)(y.value,f.avatarUrl),C=null,ce()},se=()=>{h.value=!0,y.value=f.nickName,g.value=f.avatarUrl},ce=()=>{h.value=!1},ve=()=>{b.value=!0},ke=()=>{b.value=!1},me=(0,G.sg)((()=>{k.value.setInputWidth(.3*(o.value.offsetWidth+30)),u=.8*l.value[0].offsetWidth,t.value&&t.value.forEach((e=>{e.setMenuWidth(u)}))}),100);(0,n.sV)((()=>{me(),window.addEventListener("resize",me)})),(0,n.xo)((()=>{window.removeEventListener("resize",me)}));const fe=e=>{if("注销"===e.title)return f.clearInfo(),localStorage.removeItem("token"),localStorage.removeItem("password"),void(0,N.ut)();let t=m.resolve({path:e.path});(0,N.K$)(t.href).then((()=>{(0,N.ut)()}))},pe=()=>{m.go(0)};return(e,u)=>{const m=X.u,C=w.WK,R=x.S2,L=W.kZ,K=F.A,T=E,S=d.A,U=r,V=i.tk,N=a.A;return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bo)((0,n.Lk)("div",B,[(0,n.bF)(z.A,{onExitLogin:ke})],512),[[s.aG,b.value]]),(0,n.bo)((0,n.Lk)("div",D,null,512),[[s.aG,b.value]]),(0,n.bF)(L,{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=e=>h.value=e),title:"修改个人信息",width:"500"},{footer:(0,n.k6)((()=>[(0,n.Lk)("div",J,[(0,n.bF)(R,{onClick:ce},{default:(0,n.k6)((()=>u[6]||(u[6]=[(0,n.eW)("Cancel")]))),_:1}),(0,n.bF)(R,{type:"primary",onClick:de},{default:(0,n.k6)((()=>u[7]||(u[7]=[(0,n.eW)(" Confirm ")]))),_:1})])])),default:(0,n.k6)((()=>[(0,n.Lk)("div",H,[(0,n.bF)(m,{type:"primary",size:"large"},{default:(0,n.k6)((()=>u[3]||(u[3]=[(0,n.eW)("昵称")]))),_:1}),(0,n.bF)(C,{class:"dialog-input",modelValue:y.value,"onUpdate:modelValue":u[0]||(u[0]=e=>y.value=e),placeholder:(0,c.R1)(f).nickName},null,8,["modelValue","placeholder"])]),(0,n.Lk)("div",Q,[(0,n.bF)(m,{type:"primary",size:"large"},{default:(0,n.k6)((()=>u[4]||(u[4]=[(0,n.eW)("头像")]))),_:1}),(0,n.Lk)("img",{class:"dialog-image",src:g.value,alt:""},null,8,j),(0,n.bF)(R,{onClick:ue},{default:(0,n.k6)((()=>u[5]||(u[5]=[(0,n.eW)("上传文件")]))),_:1}),(0,n.Lk)("input",{type:"file",id:"chooseImg",style:{display:"none"},onChange:re},null,32)])])),_:1},8,["modelValue"]),(0,n.Lk)("aside",P,[(0,n.Lk)("div",{id:"aside-sign",onClick:u[2]||(u[2]=e=>pe())},[(0,n.bF)(K,{id:"sign-icon",name:"aiweb"}),u[8]||(u[8]=(0,n.Lk)("div",{id:"sign-title"},"AI资讯",-1))]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,c.R1)($.MK),(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.blockId,class:"aside-title",onClick:t=>(0,c.R1)(G.kz)(e.scrollHeight)},[(0,n.Lk)("div",{class:(0,v.C4)(e.icon)},null,2),(0,n.Lk)("div",q,(0,v.v_)(e.title),1)],8,Y)))),128))]),(0,n.Lk)("article",O,[(0,n.bF)(T,{right:100,bottom:100}),(0,n.Lk)("div",{id:"article-header",ref_key:"headerRef",ref:o},[(0,n.bF)(A.A,{ref_key:"inputRef",ref:k,id:"header-input",platform:(0,c.R1)(p).platform},null,8,["platform"]),(0,n.Lk)("div",Z,[(0,c.R1)(f).id>0?((0,n.uX)(),(0,n.CE)("img",{key:0,id:"right-avatar",onClick:se,src:(0,c.R1)(f).avatarUrl},null,8,ee)):((0,n.uX)(),(0,n.CE)("div",{key:1,id:"right-avatar",onClick:ve},"登录")),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,c.R1)($.Yl),((e,t)=>((0,n.uX)(),(0,n.Wv)(M.A,{key:t,name:e.name,title:e.title,onClick:t=>fe(e)},null,8,["name","title","onClick"])))),128))])],512),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,c.R1)($.MK),(e=>((0,n.uX)(),(0,n.CE)("div",{class:"article-box",key:e.blockId},[(0,n.Lk)("div",te,(0,v.v_)(e.title),1),(0,n.Lk)("div",{ref_for:!0,ref_key:"boxContentRef",ref:l,class:"box-content"},[(0,n.Lk)("div",le,[(0,c.R1)(p).menuTitle.filter((t=>t.blockId==e.blockId)).length?((0,n.uX)(),(0,n.CE)("div",ae,[(0,n.bF)(S,{ref_for:!0,ref_key:"menuRef",ref:t,menuTitle:(0,c.R1)(p).menuTitle.filter((t=>t.blockId==e.blockId)),platform:(0,c.R1)(p).platform,onSendId:ne},null,8,["menuTitle","platform"]),(0,n.bF)(R,{class:"header-more",onClick:t=>oe(e.blockId)},{default:(0,n.k6)((()=>[u[9]||(u[9]=(0,n.eW)(" 查看更多")),(0,n.bF)(V,null,{default:(0,n.k6)((()=>[(0,n.bF)(U)])),_:1})])),_:2},1032,["onClick"])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ie,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(I.value[e.blockId],(e=>((0,n.uX)(),(0,n.Wv)(N,{class:"content-box",key:e.id,records:e,onClick:t=>_(e.id)},null,8,["records","onClick"])))),128))])],512)])))),128))])],64)}}},oe=l(1241);const ue=(0,oe.A)(ne,[["__scopeId","data-v-aafca9a6"]]);var re=ue}}]);
//# sourceMappingURL=369.4d8a6b8e.js.map